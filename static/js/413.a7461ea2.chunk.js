"use strict";(self.webpackChunkdesd_react=self.webpackChunkdesd_react||[]).push([[413],{2422:(e,t,n)=>{n.d(t,{X:()=>a});var s=n(2791);const a=(e,t)=>{const[n,a]=(0,s.useState)((()=>{if("undefined"===typeof window)return t;try{const n=window.sessionStorage.getItem(e);return n?JSON.parse(n):t}catch(n){return console.warn("Error reading sessionStorage key \u201c".concat(e,"\u201d:"),n),t}}));return[n,t=>{"undefined"==typeof window&&console.warn("Tried setting sessionStorage key \u201c".concat(e,"\u201d even though environment is not a client"));try{const s=t instanceof Function?t(n):t;window.sessionStorage.setItem(e,JSON.stringify(s)),a(s),window.dispatchEvent(new Event("local-storage"))}catch(s){console.warn("Error setting sessionStorage key \u201c".concat(e,"\u201d:"),s)}}]}},6413:(e,t,n)=>{n.r(t),n.d(t,{default:()=>l});var s=n(2791),a=n(2507),o=n(2422);const c=["Markedly Below","Moderately Below","Mildly Below","Borderline","Normal","Above Normal"];function i(e,t,n,s){console.log(e,n,s);const a=(e===r(e,n))-(e===r(e,s));return a+t<0?c[0]:a+t===0?c[1]:a+t===1?c[2]:a+t===2?c[3]:a+t===3?c[4]:a+t>3?c[5]:void 0}function r(e,t){switch(t){case"K":case"Kindergarten":return-1;case"1st grade":return function(){const e=new Date;return new Date(e.getFullYear(),11,31).getTime()-e.getTime()>0}()&&"DESD"===e?0:1;case"1L":return 0;case"1U":return 1;case"2":case"2nd grade":return 2;case"3":case"3rd grade":return 3;case"4":case"4th grade":return 4;case"5":case"5th grade":return 5;case"6":case"6th grade":return 6;case"JRH":case"7th grade or 8th grade":return 7;case"HIS":case"9-12":case"High School":return 8;case"LOD":case"UPD":case"College":return 9;case"MAS":case"Graduate School":return 10;case"DOC":case"Doctorate":return 11;case"POD":case"Post-Doctorate":return 12;default:return"ERROR"}}var d=n(184);const l=function(){const e=(0,a.eI)("https://dsokwsqthfnngbmmnjzw.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImRzb2t3c3F0aGZubmdibW1uanp3Iiwicm9sZSI6ImFub24iLCJpYXQiOjE2ODIyNzEzODQsImV4cCI6MTk5Nzg0NzM4NH0.hEKe76MrWF_Pw3VKK8yPkU3u_RQwVhzdFVtyQWMJiK8"),[t,n]=(0,s.useState)(0),[c,r]=(0,s.useState)({}),[l,u]=(0,s.useState)(!1),[h,y]=(0,s.useState)(!1),[g]=(0,o.X)("eideticCorrect",""),[p]=(0,o.X)("phoneticCorrect",""),[m]=(0,o.X)("readingLevel",""),[v]=(0,o.X)("testName",""),[w]=(0,o.X)("testWords",""),[b]=(0,o.X)("eideticResults",""),[N]=(0,o.X)("phoneticResults",""),f=(0,s.useRef)(null),[x,j]=(0,s.useState)(null),[S,k]=(0,s.useState)(null),q=(0,s.useMemo)((()=>[{id:"q1",question:"Hello, what's your name?",type:"text"},{id:"q2",question:()=>"Nice to meet you, ".concat(c.q1||"",", where can we send your results/get in touch?"),type:"email"},{id:"q3",question:"What is the highest level of education that you have reached?",type:"select",options:["Select a level of education","Kindergarten","1st grade","2nd grade","3rd grade","4th grade","5th grade","6th grade","7th grade or 8th grade","High School","College","Graduate School","Doctorate","Post-Doctorate"]},{id:"q4",question:"Have you ever been diagnosed with a learning disability?",type:"yesNo"},{id:"q5",question:"When was your last eye examination?",type:"dateOrNever"}]),[c]);(0,s.useEffect)((()=>{f.current&&t===q.findIndex((e=>"email"===e.type))&&f.current.focus()}),[t,q]);const C=e=>{"Enter"===e.key?t<q.length-1?n(t+1):D():"Backspace"===e.key&&!e.target.value&&t>0&&n(t-1)},I=(e,t)=>{r({...c,[t]:e.target.value})},D=async()=>{const t={name:c.q1,email:c.q2,education:c.q3,learning_disability:"Yes"===c.q4,last_eye_exam:"Never"===c.q5?null:c.q5,eidetic_correct:g,phonetic_correct:p,reading_level:m,test:v,test_words:w,eidetic_result:b,phonetic_result:N};j(i(v,g,m,c.q3)),k(i(v,p,m,c.q3));try{const{data:n,error:s}=await e.from("results").insert([t]);if(s)throw s;console.log("Data uploaded successfully:",n)}catch(n){console.error("Error uploading data:",n)}y(!0)},E=()=>{t<q.length-1?n(t+1):u(!0)},O=()=>{t>0&&n(t-1)},_=e=>{const t=c[e];if(!t)return!1;const n=q.find((t=>t.id===e));if(n&&"email"===n.type){return/^[\w-]+(\.[\w-]+)*@([\w-]+\.)+[a-zA-Z]{2,}$/.test(t)}return!0};return h?(0,d.jsxs)("div",{className:"survey",children:[(0,d.jsxs)("p",{children:["Sight-Word Analysis Skill: ",x]}),(0,d.jsxs)("p",{children:["Phonetic Analysis Skill: ",S]})]}):(0,d.jsx)("div",{className:"survey",children:l?(0,d.jsx)("div",{className:"submit-button-container",children:(0,d.jsx)("button",{onClick:D,children:"Submit"})}):q.map(((e,n)=>(0,d.jsxs)("div",{className:"question-container",style:{display:n===t?"flex":"none"},children:[(0,d.jsx)("div",{className:"question",children:"function"===typeof e.question?e.question():e.question}),"select"===e.type&&(0,d.jsx)("select",{className:"input",value:c[e.id]||"",autoFocus:n===t,onKeyDown:C,onChange:t=>I(t,e.id),children:e.options.map(((t,n)=>(0,d.jsx)("option",{value:t,hidden:0===n,children:t},"".concat(e.id,"-").concat(n))))}),"yesNo"===e.type&&(0,d.jsxs)("div",{className:"buttons-container",children:[(0,d.jsx)("div",{className:"button-container",children:(0,d.jsx)("button",{onClick:()=>{I({target:{value:"Yes"}},e.id),E()},children:"Yes"})},"".concat(e.id,"-yes-button")),(0,d.jsx)("div",{className:"button-container",children:(0,d.jsx)("button",{onClick:()=>{I({target:{value:"No"}},e.id),E()},children:"No"})},"".concat(e.id,"-no-button"))]},"".concat(e.id,"-buttons")),"dateOrNever"===e.type&&(0,d.jsxs)("div",{className:"buttons-container",children:[(0,d.jsx)("div",{className:"button-container",children:(0,d.jsx)("input",{className:"input",type:"date",value:c[e.id]||"",autoFocus:n===t,onKeyDown:C,onChange:t=>I(t,e.id)})},"".concat(e.id,"-date-input")),(0,d.jsx)("div",{className:"button-container",children:(0,d.jsx)("button",{onClick:()=>{I({target:{value:"Never"}},e.id),E()},children:"Never"})},"".concat(e.id,"-never-button"))]},"".concat(e.id,"-buttons")),["text"].includes(e.type)&&(0,d.jsx)("input",{className:"input",type:e.type,value:c[e.id]||"",autoFocus:!0,onKeyDown:C,onChange:t=>I(t,e.id),placeholder:"Name"},"".concat(e.id,"-input")),["email"].includes(e.type)&&(0,d.jsx)("input",{className:"input",type:e.type,value:c[e.id]||"",ref:f,onKeyDown:C,onChange:t=>I(t,e.id),placeholder:"Email Address"},"".concat(e.id,"-input")),(0,d.jsxs)("div",{className:"buttons-container",children:[(0,d.jsx)("div",{className:"button-container",children:(0,d.jsx)("button",{onClick:O,disabled:0===t,children:"\u2190 Back"})},"".concat(e.id,"-back-button")),(0,d.jsx)("div",{className:"button-container",children:(0,d.jsx)("button",{onClick:E,disabled:!_(e.id),children:"Next \u2192"})},"".concat(e.id,"-forward-button"))]},"".concat(e.id,"-nav-buttons"))]},e.id)))})}}}]);
//# sourceMappingURL=413.a7461ea2.chunk.js.map